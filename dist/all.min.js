"use strict";var blogApp=angular.module("blogApp",["ui.router"]);blogApp.config(function(t,o){o.otherwise("/"),t.state("blog",{url:"/blog",templateUrl:"templates/blog.html"}).state("blog.login",{url:"/login",controller:"loginCtrl",templateUrl:"templates/partials/blog/login.html"}).state("blog.welcome",{url:"/welcome",controller:"blogListCtrl",templateUrl:"templates/partials/blog/welcome.html"}).state("todolist",{url:"/todolist",controller:"gtdCtrl",templateUrl:"templates/todolist.html"}).state("blog.login.multiple",{url:"/todolist",views:{todolist:{controller:"gtdCtrl",templateUrl:"templates/todolist.html"}}})}),blogApp.controller("loginCtrl",["$scope","loginManage",function(t,o){t.username="admin",t.password="admin",t.verify=function(){t.user===t.username&&t.password===t.code?o.login():(t.user="",t.code="",alert("Please try again."))}}]),blogApp.controller("blogListCtrl",["$scope","$http","loginManage",function(t,o,e){t.logout=function(){e.logout()},e.islogin?o.get("/assets/data/blogList.json").success(function(o){t.blogList=o}):t.logout()}]),blogApp.controller("gtdCtrl",["$scope","taskStorageService",function(t,o){t.taskList=o.getTasks(),t.add=function(){t.taskList.push({description:t.newTask,status:"new"}),t.newTask="",o.setTasks(t.taskList)},t.delete=function(e){t.taskList.splice(e,1),o.setTasks(t.taskList)},t.check=function(e){t.taskList[e].status="completed",o.setTasks(t.taskList)}}]),Storage.prototype.setArray=function(t,o){return this.setItem(t,JSON.stringify(o))},Storage.prototype.getArray=function(t){return JSON.parse(this.getItem(t))},blogApp.service("taskStorageService",[function(){this.getTasks=function(){return localStorage.getArray("tasks")||new Array},this.setTasks=function(t){localStorage.setArray("tasks",t)}}]),blogApp.service("loginManage",["$location",function(t){this.islogin=!1,this.login=function(){this.islogin=!0,t.path("/blog/welcome")},this.logout=function(){this.islogin=!1,t.path("/blog/login")}}]);