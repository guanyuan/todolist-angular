"use strict";var blogApp=angular.module("blogApp",["ui.router"]);blogApp.config(function(t,e){e.otherwise("/"),t.state("blog",{url:"/blog",templateUrl:"templates/blog.html"}).state("blog.login",{url:"/login",controller:"loginCtrl",templateUrl:"templates/partials/blog/login.html"}).state("blog.welcome",{url:"/welcome",controller:"blogListCtrl",templateUrl:"templates/partials/blog/welcome.html"}).state("blog.login.multiple",{url:"/todolist",views:{todolist:{controller:"gtdCtrl",templateUrl:"templates/todolist.html"}}}),t.state("todolist",{url:"/todolist",controller:"gtdCtrl",templateUrl:"templates/todolist.html"}),t.state("demo-angular-directive-jquery-ui-draggable",{url:"/demo-angular-directive-jquery-ui-draggable",templateUrl:"templates/demo-angular-directive-jquery-ui-draggable.html"}),t.state("mine-sweeper",{url:"/mine-sweeper",templateUrl:"templates/mine-sweeper.html"})}),blogApp.controller("loginCtrl",["$scope","loginManage",function(t,e){t.username="admin",t.password="admin",t.verify=function(){t.user===t.username&&t.password===t.code?e.login():(t.user="",t.code="",alert("Please try again."))}}]),blogApp.controller("blogListCtrl",["$scope","$http","loginManage",function(t,e,o){t.logout=function(){o.logout()},o.islogin?e.get("/assets/data/blogList.json").success(function(e){t.blogList=e}):t.logout()}]),blogApp.controller("gtdCtrl",["$scope","taskStorageService",function(t,e){t.taskList=e.getTasks(),t.add=function(){t.taskList.push({description:t.newTask,status:"new"}),t.newTask="",e.setTasks(t.taskList)},t.delete=function(o){t.taskList.splice(o,1),e.setTasks(t.taskList)},t.check=function(o){t.taskList[o].status="completed",e.setTasks(t.taskList)}}]),blogApp.directive("draggableVertical",function(){var t;return t=function(t,e){var o=$(e).children();$(o).draggable({axis:"y",containment:".drag-up-down",scroll:!1})},{restrict:"A",link:t}}),blogApp.directive("sortableList",function(){var t;return t=function(t,e){$(e).sortable()},{restrict:"C",link:t}}),blogApp.directive("draggableHorizon",function(){var t;return t=function(t,e){var o=angular.element(e.children());$(o).draggable({axis:"x",containment:".drag-left-right",scroll:!1})},{restrict:"E",link:t}}),blogApp.directive("mineGame",function(){var t;return t=function(t,e){var o=e.attr("args").split("-"),i=parseInt(o[0]),l=parseInt(o[1]);generateBoxHtml(e,i);var r=$(e).width()/i;e.children().css({width:r+"px",height:r+"px","font-size":r/2+"px","line-height":r+"px"});var n=generateBombLocation(i,l),a=getMineDistr(i,n);console.log("Bombs located at: "+n+"(location begins from 0)"),$.each(a,function(t,e){var o=".box:nth-child("+(t+1)+") div";-1!==$.inArray(t,n)?$(o).addClass("icon-bomb"):0!==e&&$(o).html(e)}),$("body").on("click",".box button",function(){var t=$(this).parent().attr("axis").split("-");t={x:parseInt(t[0]),y:parseInt(t[1])};var e=500;if($(this).next().hasClass("icon-bomb"))$(".box button").hide(),$(".box div").show(),setTimeout(function(){alert("Do not be sad, you can do better next time.")},e);else{var o=getCurrentSurroundIndex(i,t,n);$.each(o,function(t,e){$(".box:nth-child("+(e+1)+") button").hide(),$(".box:nth-child("+(e+1)+") div").show()}),$(".box div:hidden").parent().size()===l&&setTimeout(function(){alert("Congratulations, you win!")},e)}})},{restrict:"C",link:t}}),Storage.prototype.setArray=function(t,e){return this.setItem(t,JSON.stringify(e))},Storage.prototype.getArray=function(t){return JSON.parse(this.getItem(t))},blogApp.service("taskStorageService",[function(){this.getTasks=function(){return localStorage.getArray("tasks")||new Array},this.setTasks=function(t){localStorage.setArray("tasks",t)}}]),blogApp.service("loginManage",["$location",function(t){this.islogin=!1,this.login=function(){this.islogin=!0,t.path("/blog/welcome")},this.logout=function(){this.islogin=!1,t.path("/blog/login")}}]);